fragment blogDetails on blog {
  id
  author
  created_at
  title
  url
}

query FetchBlogs {
  blog(order_by: { created_at: desc }) {
    ...blogDetails
    user {
      id
      name
    }
  }
}

mutation InsertBlog($author: String!, $title: String!, $url: String!) {
  insert_blog_one(object: { author: $author, title: $title, url: $url }) {
    ...blogDetails
    user {
      id
      name
    }
  }
}

query FetchBlogDetails($id: uuid!) {
  blog_by_pk(id: $id) {
    ...blogDetails
    user {
      id
      name
    }
    comments(order_by: { created_at: asc }) {
      id
      content
      created_at
      user {
        id
        name
      }
      blog {
        id
        user_id
      }
    }
    likes {
      id
      blog_id
      user_id
    }
  }
}

mutation DeleteBlog($id: uuid!) {
  delete_blog_by_pk(id: $id) {
    id
  }
}
